@model M2M5_fin5_1.Controllers.StudentsController.StudentGradesViewModel
@using System.Linq
@{
    ViewBag.Title = "Table of things";
}
<link href="~/Custom/css/M2M.css" rel="stylesheet" />
<h2>Many to Many view</h2>

<table>
    <thead>
        <tr>
            <th>Student</th>
            @foreach (var assignment in Model.Assignments)
            {
                <th>@assignment.AssignmentName</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var student in Model.StudentGrades)
        {
            <tr>
                <td>@student.Student.FullName</td>

                @foreach (var assignment in Model.Assignments)
                {
                   if (student.Grades.Find(g => g.AssignmentID == assignment.AssignmentID) == null)
                    {
                        <td></td>
                    }
                    else
                    {
                        <td style="text-align: center">@student.Grades.Find(g=>g.AssignmentID == assignment.AssignmentID).GradeReceived</td>
                    }
                }
            </tr>
        }
    </tbody>
</table>